{"ast":null,"code":"import layerEvents from \"../../lib/layerEvents\";\nimport mixin from \"./layerMixin\";\nexport default {\n  name: \"VectorLayer\",\n  mixins: [mixin],\n  computed: {\n    getSourceFeatures() {\n      return filter => {\n        if (this.map) {\n          return this.map.querySourceFeatures(this.sourceId, {\n            sourceLayer: this.layer[\"source-layer\"],\n            filter\n          });\n        }\n        return null;\n      };\n    },\n    getRenderedFeatures() {\n      return (geometry, filter) => {\n        if (this.map) {\n          return this.map.queryRenderedFeatures(geometry, {\n            layers: [this.layerId],\n            filter\n          });\n        }\n        return null;\n      };\n    }\n  },\n  watch: {\n    filter(filter) {\n      if (this.initial) return;\n      this.map.setFilter(this.layerId, filter);\n    }\n  },\n  created() {\n    this.$_deferredMount();\n  },\n  methods: {\n    $_deferredMount() {\n      let source = {\n        type: \"vector\",\n        ...this.source\n      };\n      this.map.on(\"dataloading\", this.$_watchSourceLoading);\n      try {\n        this.map.addSource(this.sourceId, source);\n      } catch (err) {\n        if (this.replaceSource) {\n          this.map.removeSource(this.sourceId);\n          this.map.addSource(this.sourceId, source);\n        }\n      }\n      this.$_addLayer();\n      this.$_bindLayerEvents(layerEvents);\n      this.map.off(\"dataloading\", this.$_watchSourceLoading);\n      this.initial = false;\n    },\n    $_addLayer() {\n      let existed = this.map.getLayer(this.layerId);\n      if (existed) {\n        if (this.replace) {\n          this.map.removeLayer(this.layerId);\n        } else {\n          this.$_emitEvent(\"layer-exists\", {\n            layerId: this.layerId\n          });\n          return existed;\n        }\n      }\n      let layer = {\n        id: this.layerId,\n        source: this.sourceId,\n        ...this.layer\n      };\n      this.map.addLayer(layer, this.before);\n      this.$_emitEvent(\"added\", {\n        layerId: this.layerId\n      });\n    },\n    setFeatureState(featureId, state) {\n      if (this.map) {\n        const params = {\n          id: featureId,\n          source: this.sourceId,\n          \"source-layer\": this.layer[\"source-layer\"]\n        };\n        return this.map.setFeatureState(params, state);\n      }\n    },\n    getFeatureState(featureId) {\n      if (this.map) {\n        const params = {\n          id: featureId,\n          source: this.source,\n          \"source-layer\": this.layer[\"source-layer\"]\n        };\n        return this.map.getFeatureState(params);\n      }\n    }\n  }\n};","map":{"version":3,"names":["layerEvents","mixin","name","mixins","computed","getSourceFeatures","filter","map","querySourceFeatures","sourceId","sourceLayer","layer","getRenderedFeatures","geometry","queryRenderedFeatures","layers","layerId","watch","initial","setFilter","created","$_deferredMount","methods","source","type","on","$_watchSourceLoading","addSource","err","replaceSource","removeSource","$_addLayer","$_bindLayerEvents","off","existed","getLayer","replace","removeLayer","$_emitEvent","id","addLayer","before","setFeatureState","featureId","state","params","getFeatureState"],"sources":["/Users/azizjonabdugafforov/Desktop/Code/SilkRoadExpress_WebApp/node_modules/vue-mapbox/src/components/layer/VectorLayer.js"],"sourcesContent":["import layerEvents from \"../../lib/layerEvents\";\nimport mixin from \"./layerMixin\";\n\nexport default {\n  name: \"VectorLayer\",\n  mixins: [mixin],\n\n  computed: {\n    getSourceFeatures() {\n      return filter => {\n        if (this.map) {\n          return this.map.querySourceFeatures(this.sourceId, {\n            sourceLayer: this.layer[\"source-layer\"],\n            filter\n          });\n        }\n        return null;\n      };\n    },\n\n    getRenderedFeatures() {\n      return (geometry, filter) => {\n        if (this.map) {\n          return this.map.queryRenderedFeatures(geometry, {\n            layers: [this.layerId],\n            filter\n          });\n        }\n        return null;\n      };\n    }\n  },\n\n  watch: {\n    filter(filter) {\n      if (this.initial) return;\n      this.map.setFilter(this.layerId, filter);\n    }\n  },\n\n  created() {\n    this.$_deferredMount();\n  },\n\n  methods: {\n    $_deferredMount() {\n      let source = {\n        type: \"vector\",\n        ...this.source\n      };\n\n      this.map.on(\"dataloading\", this.$_watchSourceLoading);\n      try {\n        this.map.addSource(this.sourceId, source);\n      } catch (err) {\n        if (this.replaceSource) {\n          this.map.removeSource(this.sourceId);\n          this.map.addSource(this.sourceId, source);\n        }\n      }\n      this.$_addLayer();\n      this.$_bindLayerEvents(layerEvents);\n      this.map.off(\"dataloading\", this.$_watchSourceLoading);\n      this.initial = false;\n    },\n\n    $_addLayer() {\n      let existed = this.map.getLayer(this.layerId);\n      if (existed) {\n        if (this.replace) {\n          this.map.removeLayer(this.layerId);\n        } else {\n          this.$_emitEvent(\"layer-exists\", { layerId: this.layerId });\n          return existed;\n        }\n      }\n      let layer = {\n        id: this.layerId,\n        source: this.sourceId,\n        ...this.layer\n      };\n\n      this.map.addLayer(layer, this.before);\n      this.$_emitEvent(\"added\", { layerId: this.layerId });\n    },\n\n    setFeatureState(featureId, state) {\n      if (this.map) {\n        const params = {\n          id: featureId,\n          source: this.sourceId,\n          \"source-layer\": this.layer[\"source-layer\"]\n        };\n        return this.map.setFeatureState(params, state);\n      }\n    },\n\n    getFeatureState(featureId) {\n      if (this.map) {\n        const params = {\n          id: featureId,\n          source: this.source,\n          \"source-layer\": this.layer[\"source-layer\"]\n        };\n        return this.map.getFeatureState(params);\n      }\n    }\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}