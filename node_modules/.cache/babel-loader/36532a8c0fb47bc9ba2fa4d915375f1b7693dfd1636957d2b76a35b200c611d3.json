{"ast":null,"code":"import withEvents from \"../../lib/withEvents\";\nimport withSelfEvents from \"./withSelfEvents\";\nconst markerEvents = {\n  drag: \"drag\",\n  dragstart: \"dragstart\",\n  dragend: \"dragend\"\n};\nconst markerDOMEvents = {\n  click: \"click\",\n  mouseenter: \"mouseenter\",\n  mouseleave: \"mouseleave\"\n};\nexport default {\n  name: \"MapMarker\",\n  mixins: [withEvents, withSelfEvents],\n  inject: [\"mapbox\", \"map\"],\n  provide() {\n    const self = this;\n    return {\n      get marker() {\n        return self.marker;\n      }\n    };\n  },\n  props: {\n    // mapbox marker options\n    offset: {\n      type: [Object, Array],\n      default: () => [0, 0]\n    },\n    coordinates: {\n      type: Array,\n      required: true\n    },\n    color: {\n      type: String\n    },\n    anchor: {\n      type: String,\n      default: \"center\"\n    },\n    draggable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      initial: true,\n      marker: undefined\n    };\n  },\n  watch: {\n    coordinates(lngLat) {\n      if (this.initial) return;\n      this.marker.setLngLat(lngLat);\n    },\n    draggable(next) {\n      if (this.initial) return;\n      this.marker.setDraggable(next);\n    }\n  },\n  mounted() {\n    const markerOptions = {\n      ...this.$props\n    };\n    if (this.$slots.marker) {\n      markerOptions.element = this.$slots.marker[0].elm;\n    }\n    this.marker = new this.mapbox.Marker(markerOptions);\n    if (this.$listeners[\"update:coordinates\"]) {\n      this.marker.on(\"dragend\", event => {\n        let newCoordinates;\n        if (this.coordinates instanceof Array) {\n          newCoordinates = [event.target._lngLat.lng, event.target._lngLat.lat];\n        } else {\n          newCoordinates = event.target._lngLat;\n        }\n        this.$emit(\"update:coordinates\", newCoordinates);\n      });\n    }\n    const eventNames = Object.keys(markerEvents);\n    this.$_bindSelfEvents(eventNames, this.marker);\n    this.initial = false;\n    this.$_addMarker();\n  },\n  beforeDestroy() {\n    if (this.map !== undefined && this.marker !== undefined) {\n      this.marker.remove();\n    }\n  },\n  methods: {\n    $_addMarker() {\n      this.marker.setLngLat(this.coordinates).addTo(this.map);\n      this.$_bindMarkerDOMEvents();\n      this.$_emitEvent(\"added\", {\n        marker: this.marker\n      });\n    },\n    $_emitSelfEvent(event) {\n      this.$_emitMapEvent(event, {\n        marker: this.marker\n      });\n    },\n    $_bindMarkerDOMEvents() {\n      Object.keys(this.$listeners).forEach(key => {\n        if (Object.values(markerDOMEvents).includes(key)) {\n          this.marker._element.addEventListener(key, event => {\n            this.$_emitSelfEvent(event);\n          });\n        }\n      });\n    },\n    remove() {\n      this.marker.remove();\n      this.$_emitEvent(\"removed\");\n    },\n    togglePopup() {\n      return this.marker.togglePopup();\n    }\n  }\n};","map":{"version":3,"names":["withEvents","withSelfEvents","markerEvents","drag","dragstart","dragend","markerDOMEvents","click","mouseenter","mouseleave","name","mixins","inject","provide","self","marker","props","offset","type","Object","Array","default","coordinates","required","color","String","anchor","draggable","Boolean","data","initial","undefined","watch","lngLat","setLngLat","next","setDraggable","mounted","markerOptions","$props","$slots","element","elm","mapbox","Marker","$listeners","on","event","newCoordinates","target","_lngLat","lng","lat","$emit","eventNames","keys","$_bindSelfEvents","$_addMarker","beforeDestroy","map","remove","methods","addTo","$_bindMarkerDOMEvents","$_emitEvent","$_emitSelfEvent","$_emitMapEvent","forEach","key","values","includes","_element","addEventListener","togglePopup"],"sources":["/Users/azizjonabdugafforov/Desktop/Code/SilkRoadExpress_WebApp/node_modules/vue-mapbox/src/components/UI/Marker.vue"],"sourcesContent":["<template>\n  <div style=\"display: none\">\n    <!-- slot for custom marker -->\n    <slot name=\"marker\" />\n    <!-- slot for popup -->\n    <slot v-if=\"marker\" />\n  </div>\n</template>\n\n<script>\nimport withEvents from \"../../lib/withEvents\";\nimport withSelfEvents from \"./withSelfEvents\";\n\nconst markerEvents = {\n  drag: \"drag\",\n  dragstart: \"dragstart\",\n  dragend: \"dragend\"\n};\n\nconst markerDOMEvents = {\n  click: \"click\",\n  mouseenter: \"mouseenter\",\n  mouseleave: \"mouseleave\"\n};\n\nexport default {\n  name: \"MapMarker\",\n  mixins: [withEvents, withSelfEvents],\n\n  inject: [\"mapbox\", \"map\"],\n\n  provide() {\n    const self = this;\n    return {\n      get marker() {\n        return self.marker;\n      }\n    };\n  },\n\n  props: {\n    // mapbox marker options\n    offset: {\n      type: [Object, Array],\n      default: () => [0, 0]\n    },\n    coordinates: {\n      type: Array,\n      required: true\n    },\n    color: {\n      type: String\n    },\n    anchor: {\n      type: String,\n      default: \"center\"\n    },\n    draggable: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      initial: true,\n      marker: undefined\n    };\n  },\n\n  watch: {\n    coordinates(lngLat) {\n      if (this.initial) return;\n      this.marker.setLngLat(lngLat);\n    },\n    draggable(next) {\n      if (this.initial) return;\n      this.marker.setDraggable(next);\n    }\n  },\n\n  mounted() {\n    const markerOptions = {\n      ...this.$props\n    };\n    if (this.$slots.marker) {\n      markerOptions.element = this.$slots.marker[0].elm;\n    }\n    this.marker = new this.mapbox.Marker(markerOptions);\n\n    if (this.$listeners[\"update:coordinates\"]) {\n      this.marker.on(\"dragend\", event => {\n        let newCoordinates;\n        if (this.coordinates instanceof Array) {\n          newCoordinates = [event.target._lngLat.lng, event.target._lngLat.lat];\n        } else {\n          newCoordinates = event.target._lngLat;\n        }\n        this.$emit(\"update:coordinates\", newCoordinates);\n      });\n    }\n\n    const eventNames = Object.keys(markerEvents);\n    this.$_bindSelfEvents(eventNames, this.marker);\n\n    this.initial = false;\n    this.$_addMarker();\n  },\n\n  beforeDestroy() {\n    if (this.map !== undefined && this.marker !== undefined) {\n      this.marker.remove();\n    }\n  },\n\n  methods: {\n    $_addMarker() {\n      this.marker.setLngLat(this.coordinates).addTo(this.map);\n      this.$_bindMarkerDOMEvents();\n      this.$_emitEvent(\"added\", { marker: this.marker });\n    },\n\n    $_emitSelfEvent(event) {\n      this.$_emitMapEvent(event, { marker: this.marker });\n    },\n\n    $_bindMarkerDOMEvents() {\n      Object.keys(this.$listeners).forEach(key => {\n        if (Object.values(markerDOMEvents).includes(key)) {\n          this.marker._element.addEventListener(key, event => {\n            this.$_emitSelfEvent(event);\n          });\n        }\n      });\n    },\n\n    remove() {\n      this.marker.remove();\n      this.$_emitEvent(\"removed\");\n    },\n\n    togglePopup() {\n      return this.marker.togglePopup();\n    }\n  }\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}